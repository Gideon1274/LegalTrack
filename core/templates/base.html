<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>LegalTrack â€“ {% block title %}{% endblock %}</title>
    <style>
        :root {
            --bg: #f6f6f6;
            --card: #ffffff;
            --text: #111111;
            --muted: #6b7280;
            --border: #e5e7eb;
            --border-strong: #d1d5db;
            --primary: #111111;
            --danger: #b42318;
        }

        * { box-sizing: border-box; }
        body {font-family: Arial, sans-serif; margin:0; background:var(--bg); color:var(--text);}
        a {color:inherit; text-decoration:none;}
        a:hover {text-decoration:underline;}

        .topbar {background:#fff; border-bottom:1px solid var(--border);}
        .topbar__inner {max-width:1100px; margin:0 auto; padding:12px 16px; display:flex; align-items:center; gap:16px;}
        .brand {display:flex; align-items:center; gap:10px; font-weight:700;}
        .brand__mark {width:18px; height:18px; border-radius:4px; background:var(--primary); display:inline-block;}
        .brand__text {letter-spacing:.2px;}

        .navpills {display:flex; gap:10px; align-items:center; margin:0 auto;}
        .navpills a {padding:8px 14px; border-radius:10px; border:1px solid transparent; font-weight:600; color:var(--muted);}
        .navpills a.active {background:var(--primary); color:#fff; text-decoration:none;}
        .navpills a:hover {text-decoration:none; border-color:var(--border); color:var(--text);}

        .topbar__right {display:flex; align-items:center; gap:10px; margin-left:auto;}
        .userchip {display:flex; align-items:center; gap:8px; color:var(--muted); font-weight:600; font-size:0.92rem;}
        .avatar {width:26px; height:26px; border-radius:999px; background:#e5e7eb; border:1px solid var(--border);}

        .container {max-width:1100px; margin:22px auto; padding:0 16px;}
        .container--narrow {max-width:620px;}

        .page-title {margin:0 0 8px 0; font-size:1.35rem;}
        .page-subtitle {margin:0 0 16px 0; color:var(--muted);}

        .card {background:var(--card); border:1px solid var(--border); border-radius:12px; padding:16px; margin-bottom:16px;}
        .card--flat {padding:0; overflow:hidden;}
        .card__header {padding:14px 16px; border-bottom:1px solid var(--border); display:flex; align-items:center; gap:12px;}
        .card__body {padding:16px;}

        .btn {display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:10px 14px; border-radius:10px; border:1px solid var(--border-strong); background:#fff; cursor:pointer; font-weight:700;}
        .btn-primary {background:var(--primary); color:#fff; border-color:var(--primary);}
        .btn-secondary {background:#fff; color:var(--text);}
        .btn-danger {background:var(--danger); color:#fff; border-color:var(--danger);}
        .btn-sm {padding:7px 10px; border-radius:9px; font-weight:700; font-size:0.9rem;}
        .btn:disabled {opacity:.55; cursor:not-allowed;}

        input, select, textarea {width:100%; padding:10px 12px; border:1px solid var(--border-strong); border-radius:10px; background:#fff;}
        label {display:block; margin:0 0 6px 0; color:var(--muted); font-weight:700; font-size:0.9rem;}

        .form-grid {display:grid; grid-template-columns:1fr 1fr; gap:12px;}
        .form-grid .span-2 {grid-column:1 / -1;}
        @media (max-width: 760px) { .form-grid {grid-template-columns:1fr;} }

        .table {width:100%; border-collapse:separate; border-spacing:0;}
        .table thead th {text-align:left; padding:12px 14px; font-size:0.92rem; color:var(--muted); background:#f3f4f6; border-bottom:1px solid var(--border);}
        .table tbody td {padding:12px 14px; border-bottom:1px solid #f1f5f9; vertical-align:middle;}
        .table tbody tr:last-child td {border-bottom:none;}

        .muted {color:var(--muted);}
        .link-muted {color:var(--muted);}

        .msg {padding:10px 12px; border-radius:10px; margin:0 0 12px 0; border:1px solid var(--border); background:#fff;}
        .msg.success {border-color:#b7e4c7; background:#e9f7ef;}
        .msg.error {border-color:#f5c2c7; background:#fdecea;}
        .msg.warning {border-color:#ffd8a8; background:#fff4e5;}
        .msg.info {border-color:#a5d8ff; background:#e7f5ff;}

        .subtabs {display:flex; gap:14px; align-items:center; margin-top:8px;}
        .subtabs span {color:var(--muted); font-weight:700; font-size:0.92rem; padding-bottom:6px; border-bottom:2px solid transparent;}
        .subtabs span.active {color:var(--text); border-bottom-color:var(--text);}

        .searchbar {display:flex; gap:10px; align-items:end; flex-wrap:wrap; width:100%;}
        .searchbar .grow {flex:1; min-width:240px;}

        .pagination {display:flex; justify-content:center; gap:8px; padding:14px 12px; border-top:1px solid var(--border);}
        .pagepill {min-width:34px; height:34px; display:inline-flex; align-items:center; justify-content:center; border:1px solid var(--border); border-radius:10px; color:var(--muted); font-weight:700; padding:0 10px;}
        .pagepill.active {background:var(--primary); color:#fff; border-color:var(--primary);}
        .pagepill:hover {text-decoration:none; color:var(--text);}
    </style>
</head>
<body>
    <header class="topbar">
        <div class="topbar__inner">
            <a class="brand" href="{% url 'landing' %}">
                <span class="brand__mark" aria-hidden="true"></span>
                <span class="brand__text">LegalTrack</span>
            </a>

            {% if user.is_authenticated %}
                <nav class="navpills" aria-label="Primary">
                    <a href="{% url 'dashboard' %}" class="{% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">Dashboard</a>
                    {% if user.role == 'super_admin' %}
                        <a href="{% url 'user_management' %}" class="{% if request.resolver_match.url_name == 'user_management' or request.resolver_match.url_name == 'create_staff_account' or request.resolver_match.url_name == 'edit_staff_account' %}active{% endif %}">User Management</a>
                        <a href="{% url 'audit_logs' %}" class="{% if request.resolver_match.url_name == 'audit_logs' %}active{% endif %}">Audit Logs</a>
                    {% endif %}
                </nav>

                <div class="topbar__right">
                    <div class="userchip" title="{{ user.email }}">
                        <span class="avatar" aria-hidden="true"></span>
                        <span>{{ user.full_name|default:user.email }}</span>
                    </div>
                    <form method="post" action="{% url 'logout' %}" style="margin:0;">
                        {% csrf_token %}
                        <button class="btn btn-secondary btn-sm" type="submit">Logout</button>
                    </form>
                </div>
            {% else %}
                <div class="topbar__right">
                    {% if request.resolver_match.url_name != 'login' %}
                        <a class="btn btn-primary btn-sm" href="{% url 'login' %}">Staff Login</a>
                    {% endif %}
                </div>
            {% endif %}
        </div>
    </header>

    <main class="container {% block container_class %}{% endblock %}">
        {% if messages %}
            {% for msg in messages %}
                <div class="msg {{ msg.tags|default:'info' }}">{{ msg }}</div>
            {% endfor %}
        {% endif %}
        {% block content %}{% endblock %}
    </main>
</body>
</html>