## LegalTrack (Django) — Run Guide

This guide shows how to **clone, set up, and run** the project locally on Windows.

---

## 1) Prerequisites

- Git
- Python 3.11+ (recommended)
- Node.js 18+ (only needed if you want to run the React frontend in `frontend/`)

---

## 2) Clone the repository

In PowerShell:

```powershell
git clone https://github.com/Gideon1274/LegalTrack.git
cd LegalTrack
```

---

## 3) Backend setup (Django)

### A) Create and activate a virtual environment

From the project root (where `manage.py` is):

```powershell
py -m venv .venv
.\.venv\Scripts\Activate.ps1
```

### B) Install Python dependencies

```powershell
py -m pip install --upgrade pip
py -m pip install -r requirements.txt
```

If you’re developing locally and want dev tools:

```powershell
py -m pip install -r requirements-dev.txt
```

---

## 4) Environment variables (.env)

Copy the example file and edit values:

```powershell
Copy-Item .env.example .env
```

Common settings used by this project (see `legaltrack/settings.py`):

- `DJANGO_SECRET_KEY` (required in production)
- `DJANGO_DEBUG` (`true`/`false`)
- `DJANGO_ALLOWED_HOSTS` (comma-separated)
- `LEGALTRACK_DB_PROVIDER` (`supabase` or `sqlite`)

### Database modes

#### Option 1: SQLite (recommended for quick local dev)

Set in `.env`:

```text
LEGALTRACK_DB_PROVIDER=sqlite
```

#### Option 2: Supabase Postgres

Set in `.env`:

```text
LEGALTRACK_DB_PROVIDER=supabase
DATABASE_URL=postgresql://USER:PASSWORD@HOST:5432/DBNAME
```

Notes:
- The app reads `DATABASE_URL` when `LEGALTRACK_DB_PROVIDER=supabase`.
- For local resiliency you can optionally enable a fallback if the DB host can’t be resolved:
	`LEGALTRACK_ALLOW_SQLITE_FALLBACK=true`

---

## 5) Run migrations

```powershell
py manage.py migrate
```

Optional (create an admin account via Django admin):

```powershell
py manage.py createsuperuser
```

---

## 6) Run the backend server

```powershell
py manage.py runserver
```

Open:

- App: http://127.0.0.1:8000/
- Admin: http://127.0.0.1:8000/admin/
- Login: http://127.0.0.1:8000/accounts/login/

---

## 7) Run tests (optional)

```powershell
py manage.py test
```

---

## 8) Frontend setup (React in `frontend/`) (optional)

This repo includes a React app scaffold under `frontend/`.

### A) Install Node dependencies

```powershell
cd frontend
npm install
```

### B) Run the React dev server

```powershell
npm run dev
```

By default, Vite runs on http://127.0.0.1:5173 and proxies `/api/*` to the Django server on http://127.0.0.1:8000.

---

## Troubleshooting

- If PowerShell blocks venv activation, run:
	```powershell
	Set-ExecutionPolicy -Scope CurrentUser RemoteSigned
	```
- If you change models, generate migrations:
	```powershell
	py manage.py makemigrations
	py manage.py migrate
	```

